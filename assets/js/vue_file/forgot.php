<script>
	// This is a global mixin, it is applied to every vue instance
	
	Vue.mixin({
		data: function() {
			return {
				csrf_token1: '<?php echo $_SESSION['csrf_token1'] = bin2hex(random_bytes(32)); ?>',
				forgot_password_crypto: '<?php if(isset($_GET['c'])){echo $_GET['c'];
				} ?>',
				email: '<?php if(isset($_GET['e'])){echo $_GET['e'];
				}else {
					echo 'not_set';
				} ?>',

			}
		}
	})





var forgot_password='\n\t\n\t<div class="container-fluid">\n\t<div class="row justify-content-xl-center justify-content-md-center _background ">\n\t<div class="col-12 col-xl-4 col-md-4 align-self-center ">\n\t<div class="container margin_">\n\t<div class="row py-4 ">\n\n\n\n\n\n\t<p class="text-dark h4" id="login_id">\n\tForgot Password?\n\t<br>\n\tPlease enter your email to recover..\n\t<br>\n\t<span v-show="login_status==\'no_email_found\'" class="red--text"> Account not found </span>\n\t<span v-show="login_status==\'invalid_email\'" class="red--text"> {{ login_status }} </span>\n\t<span v-show="login_status== \'crypto_added\' " class="green--text"> recovery link sent to your email </span>\n\n\t<span v-show="invalid_link==\'invalid_link\'" class="red--text"> link expired/invalid, try again </span>\n\n\t<span v-show="login_status==\'link_sent_successfully\'" class="red--text"> link expired/invalid, try again </span>\n\t</p>\n\t<span v-show="login_status==\'server_problem\'" class="red--text"> Email server problem , try later. </span>\n\t</p>\n\n\n\n\t</div>\n\n\t<div class="row justify-content-xl-center bg-white py-5 mb-5">\n\n\t<div class="col-12 col-xl-9 ">\n\n\t<div class="form-group">\n\t<label for="exampleInputEmail1" ><small id="idExampleInputEmail1Small">Email address*\n\n\t<span v-show="email_validity == \'valid\'" class="text-success"> {{ email_validity }} </span>\n\t<span v-show="email_validity == \'invalid\'" class="text-danger"> {{ email_validity }}  </span>\n\n\n\n\t\n\n\t</small>\n\t<br>\n\n\n\n\t</label>\n\t<input @keyup="onChangeValidity(\'email\')" v-model=\'email\' type="text" class="form-control rounded-0" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email"\n\tvalue=""\n\t>\n\t</div>\n\n\t<v-btn color="success" :loading = \'loading\' @click="submit" type="submit" name="submit" value="submit" class="btn btn-success rounded-0 mb-1 w-100 py-2">Recover Password</v-btn >\n\n\t\x3c!-- <button type="submit" name="submit" value="submit" class="btn btn-info rounded-0 mb-1 w-100 py-2">Back to Login</button> --\x3e\n\n\t<br>\n\n\t<div class="row justify-content-end">\n\t<div class="col-lg-auto">\n\t<a v-bind:href="address.loginPage" class="">Go Back to Login</a>\n\t</div>\n\t</div>\n\n\n\n\n\n\t</div>\n\n\n\n\t</div>\n\t</div>\n\t</div>\n\t</div>\n\n\n\t\n\n\t</div>\n\t\n\t',password_recovery='<div class="container-fluid bg-light " style="margin-top: 150px;">\n\t<div class="row justify-content-center ">\n\n\t\x3c!-- update top part starts--\x3e\n\n\t<div class=" align-self-center col  col-4  px-0 py-0" style="box-shadow: 0 0 10px lightgrey; ">\n\n\n\t<div class="row bg-white mx-1">\n\n\t\n\t<div class="col-9 col  ml-0">\n\t<p class="h3 ">\n\n\t</p>\n\t\n\t</div>\n\n\t</div>\n\n\t\x3c!-- update top part ends--\x3e\n\n\n\t\x3c!-- update field part starts --\x3e\n\t<div class="row bg-white mt-4 justify-content-center mx-1">\n\t<div class="w-100 bg-info">\n\t<p class="h3 text-white pl-4 pt-2"> <i class="fas fa-info-circle mr-0"></i> Change Password</p>\n\t</div>\n\n\t<div class="col-10 mt-3 border border-right-0 border-top-0 border-left-0 pl-0 pr-0"> \n\t<small id=\'idSmallEmailChangeDashboard\'  class="" v-bind:style=\' changes.password.smallText \' > <span>New Password \n\n\n\t<span v-show="password_validity == \'valid\'" class="text-success"> {{ password_validity }} </span>\n\t<span v-show="password_validity == \'invalid\'" class="text-danger"> {{ password_validity }} </span>\n\t\n\t\n\n\n\t</span> <span @click="enable_input(\'password\')" id="idSpanEmailChangeDashboard" v-bind:style="changes.password.smallButton" class="small_button">Change</span></small>\n\n\t<input @keyup="validityCheckInput(\'password\')" v-model="password" :disabled=\'password_input == true\' id="idInputEmailUpdateProfileDashboard" class="d-block border-0 w-100 pb-1 mr-0 pl-2" placeholder="Type Your Name Here" type="password" value="" >\n\n\t</div>\n\n\t\n\n\t<div class="col-10 mt-3 border border-right-0 border-top-0 border-left-0 pl-0 pr-0"> \n\t<small id=\'idSmallEmailChangeDashboard\'  class="" v-bind:style=\' changes.repassword.smallText \' > <span>Re-enter repassword \n\n\n\t<span v-show="repassword_validity == \'valid\'" class="text-success"> {{ repassword_validity }} </span>\n\t<span v-show="repassword_validity == \'invalid\'" class="text-danger"> {{ repassword_validity }} </span>\n\t\n\t\n\n\n\t</span> <span @click="enable_input(\'repassword\')" id="idSpanEmailChangeDashboard" v-bind:style="changes.repassword.smallButton" class="small_button">Change</span></small>\n\n\t<input @keyup="validityCheckInput(\'repassword\')" v-model="repassword" :disabled=\'repassword_input == true\' id="idInputEmailUpdateProfileDashboard" class="d-block border-0 w-100 pb-1 mr-0 pl-2" placeholder="Type Your Name Here" type="password" value="" >\n\n\t</div>\n\n\t\n\n\n\t<div class="col-10 mx-0 px-0 ">\n\t<v-btn color="error" @click="submit()" id="idButtonUpdateProfileDashboard" class=" btn-block mb-3 mx-0 rounded-0">\n\tUpdate Info\n\t</v-btn>\n\t</div>\n\n\t\x3c!-- update field part ends --\x3e\n\n\t</div>\n\t</div>\n\t</div>\n\t\n\t<v-row justify="center">\n\n\n\t<v-dialog\n\tv-model="dialog"\n\tmax-width="290"\n\t>\n\t<v-card>\n\t<v-card-title class="headline">Status</v-card-title>\n\n\t<v-card-text class="black--text">\n\t{{ status_text }}\n\t</v-card-text>\n\n\t<v-card-actions>\n\t<v-spacer></v-spacer>\n\n\n\n\t<v-btn\n\tcolor="green darken-1"\n\ttext\n\t@click="dialog = false"\n\t>\n\tOkay\n\t</v-btn>\n\t</v-card-actions>\n\t</v-card>\n\t</v-dialog>\n\t</v-row>\n\n\n\n\t</div>';Vue.component("password_recovery",{template:password_recovery,data:()=>({name:"riyad---vue",dialog:!1,status_text:"",password_input:!0,password:"",password_validity:"",repassword_input:!0,repassword:"",repassword_validity:"",changes:{password:{smallText:{color:"#2196f3"},smallButton:{color:"white",backgroundColor:"#2196f3"}},repassword:{smallText:{color:"#2196f3"},smallButton:{color:"white",backgroundColor:"#2196f3"}}}}),methods:{enable_input:function(t){"password"==t&&(this.password_input=!1,this.changes.password.smallText.color="red",this.changes.password.smallButton.color="white",this.changes.password.smallButton.backgroundColor="red"),"repassword"==t&&(this.repassword_input=!1,this.changes.repassword.smallText.color="red",this.changes.repassword.smallButton.color="white",this.changes.repassword.smallButton.backgroundColor="red")},validityCheckInput(t){if("password"==t){var s=/[\S]{6,}/g.test(this.password);this.password_validity=0==s?"invalid":"valid"}else if("repassword"==t){s=/[\S]{6,}/g.test(this.repassword);this.repassword_validity=0==s?"invalid":"valid"}},submit(){this.validityCheckInput("password"),this.validityCheckInput("repassword"),"valid"==this.password_validity&&this.password==this.repassword?axios.post(this.model.modelProfile_update,{purpose:"password",password:this.password,email:this.email}).then(function(t){this.status_text="Password Updated successfully",this.dialog=!0}.bind(this)).catch(function(t){}.bind(this)):(this.status_text="password doesnt match",this.dialog=!0)}},created(){}}),Vue.component("forgot_password",{template:forgot_password,props:["invalid_link"],data:()=>({loading:!1,status_text:"",email:"",email_validity:"",login_status:""}),methods:{submit:function(){this.invalid_link="",this.loading=!0,"valid"==this.email_validity?axios.post(this.model.modelProfile_update,{purpose:"forgot_password",email:this.email}).then(function(t){this.loading=!1,this.login_status=t.data}.bind(this)).catch(function(t){this.loading=!1}.bind(this)):(this.loading=!1,this.login_status="invalid_email")},onChangeValidity(t){if("email"==t){var s=/^[a-zA-Z]{1}[a-zA-Z1-9._]{3,15}@[a-zA-Z]{1}[a-zA-Z1-9]{3,15}\.[a-zA-Z]{2,10}(\.[a-zA-Z]{2})*$/g.test(this.email);this.email_validity=0==s?"invalid":"valid"}}},created(){},updated(){}});var forgot=new Vue({el:"#app",vuetify:new Vuetify,data:{componet_name:"forgot_password",invalid_link:""},methods:{},beforeCreate(){},created(){"not_set"!=this.email.trim()&&axios.post(this.model.modelProfile_update,{purpose:"forgot_password_recovery",email:this.email.trim(),forgot_password_crypto:this.forgot_password_crypto.trim()}).then(function(t){"allow"==t.data?this.componet_name="password_recovery":(this.invalid_link=t.data,this.componet_name="forgot_password")}.bind(this)).catch(function(t){}.bind(this))},beforeMount(){},mounted(){},beforeUpdated(){},updated(){}});















</script>